<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>D3: Line chart with axes</title>
    <script type="text/javascript" src="../d3.js"></script>
    <style type="text/css">
      .line {
        fill: none;
        stroke: rgb(128, 0, 28);
        stroke-width: 0.5;
      }
    </style>
  </head>
  <body>
    <script type="text/javascript">
      var w = 1000;
      var h = 800;
      var padding = 40;

      var dataset, xScale, yScale, xAxis, yAxis, line;
      var formatTime = d3.timeFormat("%Y");

      var rowConverter = function (d) {
        return {
          when: new Date(d.when),
          value: parseFloat(d.value),
        };
      };

      d3.csv("15Meter.csv", rowConverter, function (data) {
        var dataset = data;

        xScale = d3
          .scaleTime()
          .domain([
            d3.min(dataset, function (d) {
              return d.when;
            }),
            d3.max(dataset, function (d) {
              return d.when;
            }),
          ])
          .range([padding, w]);

        yScale = d3
          .scaleLinear()
          .domain([
            0,
            d3.max(dataset, function (d) {
              return d.value;
            }),
          ])
          .range([h - padding, 0]);

        xAxis = d3.axisBottom().scale(xScale).ticks(10).tickFormat(formatTime);

        yAxis = d3.axisLeft().scale(yScale).ticks(10);

        line = d3
          .line()
          .x(function (d) {
            return xScale(d.when);
          })
          .y(function (d) {
            return yScale(d.value);
          });

        var svg = d3
          .select("body")
          .append("svg")
          .attr("width", w)
          .attr("height", h);

        svg.append("path").datum(dataset).attr("class", "line").attr("d", line);

        svg
          .append("g")
          .attr("class", "axis")
          .attr("transform", "translate(0," + (h - padding) + ")")
          .call(xAxis);

        svg
          .append("g")
          .attr("class", "axis")
          .attr("transform", "translate(" + padding + ",0)")
          .call(yAxis);
      });
    </script>
  </body>
</html>
